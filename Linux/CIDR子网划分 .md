CIDR（Classless Inter-Domain Routing，无类域间路由）是 IP 地址分配和路由的一种现代方式，用于代替早期的 A/B/C 类网络划分，更灵活高效地利用 IP 地址空间。

------

## 🧠 一、CIDR 基础知识

### 1. CIDR 表示法格式

CIDR 使用 **“IP地址/掩码位数”** 来表示网段：

```
192.168.1.0/24
```

其中：

- `192.168.1.0` 是网络地址
- `/24` 表示前 24 位为网络部分，后 8 位为主机部分（即子网掩码是 `255.255.255.0`）

------

### 2. 子网掩码与前缀长度对照表

| CIDR 前缀 | 子网掩码        | 可用主机数（=2ⁿ - 2） |
| --------- | --------------- | --------------------- |
| /8        | 255.0.0.0       | 16,777,214            |
| /16       | 255.255.0.0     | 65,534                |
| /24       | 255.255.255.0   | 254                   |
| /25       | 255.255.255.128 | 126                   |
| /26       | 255.255.255.192 | 62                    |
| /27       | 255.255.255.224 | 30                    |
| /28       | 255.255.255.240 | 14                    |
| /29       | 255.255.255.248 | 6                     |
| /30       | 255.255.255.252 | 2                     |
| /32       | 255.255.255.255 | 1（单个IP）           |

------

## 📐 二、CIDR 子网划分步骤

以 `192.168.1.0/24` 为例，如果你要划分成 4 个子网：

### 步骤：

1. 原网络是 `/24`，主机位数 = 32 - 24 = 8
2. 4 个子网 = 需要 2 位来划分（因为 2² = 4）
3. 新前缀 = 24 + 2 = `/26`
4. 每个子网有：2⁶ = 64 个地址，其中可用地址是 62（减去网络和广播地址）

### 子网划分结果：

| 子网编号 | 网段（CIDR）       | 起始IP          | 结束IP          | 广播地址        |
| -------- | ------------------ | --------------- | --------------- | --------------- |
| 子网1    | `192.168.1.0/26`   | `192.168.1.1`   | `192.168.1.62`  | `192.168.1.63`  |
| 子网2    | `192.168.1.64/26`  | `192.168.1.65`  | `192.168.1.126` | `192.168.1.127` |
| 子网3    | `192.168.1.128/26` | `192.168.1.129` | `192.168.1.190` | `192.168.1.191` |
| 子网4    | `192.168.1.192/26` | `192.168.1.193` | `192.168.1.254` | `192.168.1.255` |

------

## 🔧 三、CIDR 应用场景

- **节省IP地址**：避免传统A/B/C类网络的浪费
- **灵活划分子网**：适应不同规模网络需求
- **路由聚合**（Route Aggregation）：多个连续网段可合并成一个更大的路由前缀，减小路由表体积（如 ISP 使用）

------

## 🧮 四、CIDR 计算小技巧

1. 可用主机数 = 2^(32 - 掩码位数) - 2
2. 子网掩码 = 把 CIDR 位数换成二进制 → 再转为十进制
3. 网络地址 = IP 地址按子网掩码做按位与运算
4. 广播地址 = IP 地址主机位全设为 1（或是网络地址 + 主机数 + 1）

------

## 🧩 五、练习题示例

### 题目1：

将 `10.0.0.0/24` 划分为 8 个子网，分别列出每个子网的 CIDR 和起始IP。

### 题目2：

一个 `/27` 的网段，最多能有多少个可用主机？广播地址是多少？

------

如果你需要练习题 + 答案，或想学习如何使用 Python 或 bash 工具进行 CIDR 计算，也可以告诉我，我来教你怎么自动算。